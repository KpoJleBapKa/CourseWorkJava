<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WotStat API</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        async function fetchPlayers() {
            const response = await fetch('/api/players');
            const players = await response.json();
            console.log(players);
        }

        async function createPlayer() {
            const player = {
                nickname: document.getElementById('create-nickname').value,
                totalBattles: parseInt(document.getElementById('create-totalBattles').value),
                winRate: parseFloat(document.getElementById('create-winRate').value),
                averageDamage: parseFloat(document.getElementById('create-averageDamage').value),
                averageExp: parseFloat(document.getElementById('create-averageExp').value),
                clanName: document.getElementById('create-clanName').value
            };

            const response = await fetch('/api/players', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(player)
            });

            const newPlayer = await response.json();
            console.log(newPlayer);
        }

        async function updatePlayer() {
            const id = document.getElementById('update-id').value;
            const player = {
                nickname: document.getElementById('update-nickname').value,
                totalBattles: parseInt(document.getElementById('update-totalBattles').value),
                winRate: parseFloat(document.getElementById('update-winRate').value),
                averageDamage: parseFloat(document.getElementById('update-averageDamage').value),
                averageExp: parseFloat(document.getElementById('update-averageExp').value),
                clanName: document.getElementById('update-clanName').value
            };

            const response = await fetch(`/api/players/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(player)
            });

            const updatedPlayer = await response.json();
            console.log(updatedPlayer);
        }

        async function partiallyUpdatePlayer() {
            const id = document.getElementById('patch-id').value;
            const updates = {
                nickname: document.getElementById('patch-nickname').value,
                totalBattles: parseInt(document.getElementById('patch-totalBattles').value),
                winRate: parseFloat(document.getElementById('patch-winRate').value),
                averageDamage: parseFloat(document.getElementById('patch-averageDamage').value),
                averageExp: parseFloat(document.getElementById('patch-averageExp').value),
                clanName: document.getElementById('patch-clanName').value
            };

            const response = await fetch(`/api/players/${id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(updates)
            });

            const updatedPlayer = await response.json();
            console.log(updatedPlayer);
        }

        async function deletePlayer() {
            const id = document.getElementById('delete-id').value;

            const response = await fetch(`/api/players/${id}`, {
                method: 'DELETE'
            });

            if (response.ok) {
                console.log(`Player with ID ${id} deleted`);
            } else {
                console.error('Failed to delete player');
            }
        }
    </script>
</head>
<body>
<div class="container">
    <h1>WotStat API</h1>
    <button onclick="fetchPlayers()">Fetch Players</button>

    <div class="section">
        <h2>Create Player</h2>
        <input type="text" id="create-nickname" placeholder="Nickname">
        <input type="number" id="create-totalBattles" placeholder="Total Battles">
        <input type="number" step="0.01" id="create-winRate" placeholder="Win Rate">
        <input type="number" step="0.01" id="create-averageDamage" placeholder="Average Damage">
        <input type="number" step="0.01" id="create-averageExp" placeholder="Average Exp">
        <input type="text" id="create-clanName" placeholder="Clan Name">
        <button onclick="createPlayer()">Create</button>
    </div>

    <div class="section">
        <h2>Update Player</h2>
        <input type="text" id="update-id" placeholder="Player ID">
        <input type="text" id="update-nickname" placeholder="Nickname">
        <input type="number" id="update-totalBattles" placeholder="Total Battles">
        <input type="number" step="0.01" id="update-winRate" placeholder="Win Rate">
        <input type="number" step="0.01" id="update-averageDamage" placeholder="Average Damage">
        <input type="number" step="0.01" id="update-averageExp" placeholder="Average Exp">
        <input type="text" id="update-clanName" placeholder="Clan Name">
        <button onclick="updatePlayer()">Update</button>
    </div>

    <div class="section">
        <h2>Partially Update Player</h2>
        <input type="text" id="patch-id" placeholder="Player ID">
        <input type="text" id="patch-nickname" placeholder="Nickname">
        <input type="number" id="patch-totalBattles" placeholder="Total Battles">
        <input type="number" step="0.01" id="patch-winRate" placeholder="Win Rate">
        <input type="number" step="0.01" id="patch-averageDamage" placeholder="Average Damage">
        <input type="number" step="0.01" id="patch-averageExp" placeholder="Average Exp">
        <input type="text" id="patch-clanName" placeholder="Clan Name">
        <button onclick="partiallyUpdatePlayer()">Patch</button>
    </div>

    <div class="section">
        <h2>Delete Player</h2>
        <input type="text" id="delete-id" placeholder="Player ID">
        <button onclick="deletePlayer()">Delete</button>
    </div>
</div>
</body>
</html>
